import{_ as i,c as a,o as e,ag as t}from"./chunks/framework.Dd2XX6Aa.js";const c=JSON.parse('{"title":"Xrdp 연결 설정","description":"","frontmatter":{},"headers":[],"relativePath":"os/linux/server-services/connection-configuration-xrdp.md","filePath":"os/linux/server-services/connection-configuration-xrdp.md","lastUpdated":1733966697000}'),l={name:"os/linux/server-services/connection-configuration-xrdp.md"};function n(h,s,p,k,d,r){return e(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="xrdp-연결-설정" tabindex="-1">Xrdp 연결 설정 <a class="header-anchor" href="#xrdp-연결-설정" aria-label="Permalink to &quot;Xrdp 연결 설정&quot;">​</a></h1><p>RDP 프로토콜을 활용하여 리눅스에서 원격 데스크톱 서비스를 구성할 수 있다. 로그아웃 후 다시 로그인해도 이전의 세션(작업 환경)이 유지되며 드라이브 리다이렉션, 클립보드 등의 다양한 기능을 지원한다. Xrdp는 2GB 이상의 RAM, 2016년 이후 리눅스 배포판에서 구성하는 것을 권장한다.</p><p>먼저 리눅스 시스템에 Xfce4나 Gnome Desktop같은 데스크톱 환경이 설치되어있어야 한다.</p><h2 id="방화벽-설정" tabindex="-1">방화벽 설정 <a class="header-anchor" href="#방화벽-설정" aria-label="Permalink to &quot;방화벽 설정&quot;">​</a></h2><p>RDP 포트인 3389/tcp 포트를 연다.</p><h3 id="ufw-debian-ubuntu-계열" tabindex="-1">ufw (Debian/Ubuntu 계열) <a class="header-anchor" href="#ufw-debian-ubuntu-계열" aria-label="Permalink to &quot;ufw (Debian/Ubuntu 계열)&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ufw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> allow</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 3389/tcp</span></span></code></pre></div><h3 id="firewalld-redhat-centos-계열" tabindex="-1">Firewalld (RedHat/CentOS 계열) <a class="header-anchor" href="#firewalld-redhat-centos-계열" aria-label="Permalink to &quot;Firewalld (RedHat/CentOS 계열)&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --zone=public</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --add-port=3389/tcp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --permanent</span></span></code></pre></div><h3 id="iptables" tabindex="-1">Iptables <a class="header-anchor" href="#iptables" aria-label="Permalink to &quot;Iptables&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> iptables</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -A</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> INPUT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tcp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tcp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dport</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3389</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -j</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ACCEPT</span></span></code></pre></div><h2 id="xrdp-패키지-설치" tabindex="-1">Xrdp 패키지 설치 <a class="header-anchor" href="#xrdp-패키지-설치" aria-label="Permalink to &quot;Xrdp 패키지 설치&quot;">​</a></h2><h3 id="debian-ubuntu-계열" tabindex="-1">Debian / Ubuntu 계열 <a class="header-anchor" href="#debian-ubuntu-계열" aria-label="Permalink to &quot;Debian / Ubuntu 계열&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xrdp</span></span></code></pre></div><h3 id="redhat-centos-계열" tabindex="-1">RedHat / CentOS 계열 <a class="header-anchor" href="#redhat-centos-계열" aria-label="Permalink to &quot;RedHat / CentOS 계열&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dnf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xrdp</span></span></code></pre></div><h2 id="xrdp-환경설정" tabindex="-1">Xrdp 환경설정 <a class="header-anchor" href="#xrdp-환경설정" aria-label="Permalink to &quot;Xrdp 환경설정&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/etc/xrdp/xrdp.ini</span></span></code></pre></div><h3 id="그래픽-데스크톱-환경-구성" tabindex="-1">그래픽 데스크톱 환경 구성 <a class="header-anchor" href="#그래픽-데스크톱-환경-구성" aria-label="Permalink to &quot;그래픽 데스크톱 환경 구성&quot;">​</a></h3><p>특정 그래픽 데스크톱 환경으로 시작하려면 아래 파일을 편집하여 하단에 내용을 추가한다.</p><ul><li><code>/etc/xrdp/startwm.sh</code></li></ul><h4 id="gnome-desktop-xubuntu-desktop-기본값" tabindex="-1">Gnome Desktop, Xubuntu Desktop (기본값) <a class="header-anchor" href="#gnome-desktop-xubuntu-desktop-기본값" aria-label="Permalink to &quot;Gnome Desktop, Xubuntu Desktop (기본값)&quot;">​</a></h4><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /bin/sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/X11/Xsession</span></span></code></pre></div><h4 id="xfce4" tabindex="-1">Xfce4 <a class="header-anchor" href="#xfce4" aria-label="Permalink to &quot;Xfce4&quot;">​</a></h4><p>기본값을 제거한 후 다음 내용을 추가한다.</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">xfce4-session</span></span></code></pre></div><h3 id="색상-프로파일-편집" tabindex="-1">색상 프로파일 편집 <a class="header-anchor" href="#색상-프로파일-편집" aria-label="Permalink to &quot;색상 프로파일 편집&quot;">​</a></h3><p>Xrdp 접속 시 색상 프로파일 관련 권한을 묻는다면 아래 파일을 편집하여 해결할 수 있다.</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/polkit-1/localauthority/50-local.d/45-allow-colord.pkla</span></span></code></pre></div><p>파일 편집기로 파일을 열고 아래 내용으로 수정한다.</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[Allow Colord all Users]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Identity</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">unix-user:*</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Action</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">org.freedesktop.color-manager.create-device</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">org.freedesktop.color-manager.create-profile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">org.freedesktop.color-manager.delete-device</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">org.freedesktop.color-manager.delete-profile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">org.freedesktop.color-manager.modify-device</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">org.freedesktop.color-manager.modify-profile</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ResultAny</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">no</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ResultInactive</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">no</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ResultActive</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">yes</span></span></code></pre></div><p>이후 서비스를 재시작해야 할 수 있다. (하단 참고)</p><h3 id="서비스-시작-구성" tabindex="-1">서비스 시작 구성 <a class="header-anchor" href="#서비스-시작-구성" aria-label="Permalink to &quot;서비스 시작 구성&quot;">​</a></h3><p>시스템 재시작 시 마다 Xrdp 서비스를 시작하려면 다음 명령을 사용한다.</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xrdp</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># OR</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xrdp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span></span></code></pre></div><p>아래 명령어로 서비스를 시작한다.</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xrdp</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># OR</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xrdp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span></span></code></pre></div><h2 id="접속-방법" tabindex="-1">접속 방법 <a class="header-anchor" href="#접속-방법" aria-label="Permalink to &quot;접속 방법&quot;">​</a></h2><p><strong>Windows</strong>나 <strong>macOS</strong>에서 제공하는 <strong>RDP 클라이언트</strong>를 활용한다.</p><ul><li>Microsoft Terminal Services Client (mstsc.exe)</li><li>Microsoft Remote Desktop</li></ul><p>주소창에 <code>호스트:포트번호</code>를 입력하여 접속한다.</p>`,41)])])}const F=i(l,[["render",n]]);export{c as __pageData,F as default};
