import{_ as a,c as i,o as n,ag as p}from"./chunks/framework.CwVs45hf.js";const F=JSON.parse('{"title":"리눅스 SWAP 메모리 지정","description":"","frontmatter":{},"headers":[],"relativePath":"os/linux/basic/swap.md","filePath":"os/linux/basic/swap.md","lastUpdated":1757814593000}'),l={name:"os/linux/basic/swap.md"};function e(t,s,h,k,d,B){return n(),i("div",null,[...s[0]||(s[0]=[p(`<h1 id="리눅스-swap-메모리-지정" tabindex="-1">리눅스 SWAP 메모리 지정 <a class="header-anchor" href="#리눅스-swap-메모리-지정" aria-label="Permalink to &quot;리눅스 SWAP 메모리 지정&quot;">​</a></h1><p>리눅스에서 시스템 메모리(RAM) 공간이 부족한 경우 응용 프로그램이나 시스템 다운을 방지하기 위해 디스크에 메모리를 대체할 수 있는 공간을 만들어줄 수 있다. 이를 SWAP이라고 한다.</p><p>SWAP은 시스템 자원이 여유로운 경우 반드시 지정해야만 하는 것은 아니지만, 예상치 못한 상황을 위해 적절한 SWAP 공간을 주는 것을 권장하고 있다.</p><p>아래는 Ubuntu 시스템 기준 권장되는 SWAP 크기이다 (hibernation - 최대 절전 모드):</p><ul><li>관련 문서: <a href="https://help.ubuntu.com/community/SwapFaq" target="_blank" rel="noreferrer">https://help.ubuntu.com/community/SwapFaq</a></li></ul><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>        RAM   No hibernation    With Hibernation  Maximum</span></span>
<span class="line"><span>      256MB            256MB               512MB    512MB</span></span>
<span class="line"><span>      512MB            512MB              1024MB   1024MB</span></span>
<span class="line"><span>     1024MB           1024MB              2048MB   2048MB</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        RAM   No hibernation    With Hibernation  Maximum</span></span>
<span class="line"><span>        1GB              1GB                 2GB      2GB</span></span>
<span class="line"><span>        2GB              1GB                 3GB      4GB</span></span>
<span class="line"><span>        3GB              2GB                 5GB      6GB</span></span>
<span class="line"><span>        4GB              2GB                 6GB      8GB</span></span>
<span class="line"><span>        5GB              2GB                 7GB     10GB</span></span>
<span class="line"><span>        6GB              2GB                 8GB     12GB</span></span>
<span class="line"><span>        8GB              3GB                11GB     16GB</span></span>
<span class="line"><span>       12GB              3GB                15GB     24GB</span></span>
<span class="line"><span>       16GB              4GB                20GB     32GB</span></span>
<span class="line"><span>       24GB              5GB                29GB     48GB</span></span>
<span class="line"><span>       32GB              6GB                38GB     64GB</span></span>
<span class="line"><span>       64GB              8GB                72GB    128GB</span></span>
<span class="line"><span>      128GB             11GB               139GB    256GB</span></span>
<span class="line"><span>      256GB             16GB               272GB    512GB</span></span>
<span class="line"><span>      512GB             23GB               535GB      1TB</span></span>
<span class="line"><span>        1TB             32GB              1056GB      2TB</span></span>
<span class="line"><span>        2TB             46GB              2094GB      4TB</span></span>
<span class="line"><span>        4TB             64GB              4160GB      8TB</span></span>
<span class="line"><span>        8TB             91GB              8283GB     16TB</span></span></code></pre></div><p>현재 시스템이 8GB RAM이라고 가정할 경우 3GB의 SWAP 공간을 주려면 아래와 같이 진행한다.</p><p>아래 명령들은 root 사용자 또는 sudo 권한으로 진행한다.</p><p>먼저 아래와 같이 SWAP 공간 할당을 지정한 파일을 만들어준다.</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> if=/dev/zero</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of=/swapfile</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bs=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> count=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4194304</span></span></code></pre></div><p>이후 만들어진 파일을 읽을 수 있도록 올바른 권한을 지정해준다.</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chmod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 600</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /swapfile</span></span></code></pre></div><p>마지막으로 시스템에 SWAP 파일을 사용하여 SWAP 공간을 활성화한다.</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mkswap</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /swapfile</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> swapon</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /swapfile</span></span></code></pre></div><p>swapon이 정상 동작하는지 확인하려면 아래 명령을 사용해본다:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">swapon</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Filename</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                    Type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            Size</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          Used</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Priority/swapfile</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">           file</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            2097148</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">       -2</span></span></code></pre></div><p>이제 <code>free</code> 명령을 통해 SWAP 공간이 올바르게 할당되었는지 확인할 수 있다:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> free</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -h</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">               total</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        used</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        free</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      shared</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  buff/cache</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   available</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Mem:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">           7.6Gi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       2.0Gi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       4.7Gi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       127Mi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       1.3Gi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       5.6Gi</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Swap:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          4.0Gi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          0B</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       4.0Gi</span></span></code></pre></div><p>위 방법으로만은 시스템 부팅 시에 SWAP이 해제될 수 있으므로, 재부팅 할 때 마다 SWAP을 자동으로 활성화하려면 아래 파일을 편집해야 한다.</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/fstab</span></span></code></pre></div><p>에디터를 열었으면 하단에 아래 내용을 추가한다:</p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>/swapfile swap swap defaults 0 0</span></span></code></pre></div><p>이후 파일을 저장하고 재부팅을 시도하여 정상적으로 적용되었는지 확인해본다.</p><p>만약 SWAP 공간을 비활성화 하려는 경우 아래와 같은 명령을 사용한다.</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">swapoff</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span></span></code></pre></div>`,25)])])}const o=a(l,[["render",e]]);export{F as __pageData,o as default};
